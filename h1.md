## H1 Hacker's journey
### Host-kone: AMD Ryzen 5800X3D, NVIDIA RTX 3080, 32GB DDR4, Windows 11 23H2

#### x) Lue/katso/kuuntele ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)



#### a) Asenna Kali virtuaalikoneeseen. (29.10 klo 18.10)
Koneella mulla olikin jo valmiina Virtualbox asennettuna. https://www.virtualbox.org/wiki/Downloads 
Kävin hakemassa Kali .ISOn heidän sivuiltaan osoitteesta https://www.kali.org/get-kali/#kali-virtual-machines.
Latasin 64-bittisen zipin kohdan Virtualbox alta. Kansion purettuani siellä oli nämä tiedostot:

![image](https://github.com/user-attachments/assets/07d8cd57-4172-4c1f-adfb-2e5fd71c7129)

Avasin tuon .vbox-tiedoston Virtualboxilla, annoin sille enemmän muistia ja prosessorilankoja (8192MB, 6 threadia) ja käynnistin Kalin Start-napista. 
Tunnuksilla kali/kali pääsin sisään!

![image](https://github.com/user-attachments/assets/e22b7418-e2fa-4c15-8045-29a93d055413)

#### b) Irrota Kali-virtuaalikone verkosta. Todista testein, että kone ei saa yhteyttä Internetiin (esim. 'ping 8.8.8.8') (29.10. klo 18.21)
Yläpalkista irroitin netin ja kokeilin seuraavaa pingiä terminaalista: 

![image](https://github.com/user-attachments/assets/e7d23855-c212-4a37-a3f5-0c81d8906c86)

![image](https://github.com/user-attachments/assets/ac1a69ce-ef7f-47e7-86eb-d45f7bbf0a03)

Eipä toimi. Netti takaisin ja seuraava ping:

![image](https://github.com/user-attachments/assets/343b2947-5d21-49e1-a1f4-b40343812d29)

Toimii!
  
####   c) Porttiskannaa 1000 tavallisinta tcp-porttia omasta koneestasi (nmap -A localhost). Analysoi tulokset. (29.10 klo 23.01)

Laitoin taas netin poikki ja ajoin komennon ```sudo nmap -A localhost```.

Tämä oli tulos: 

![image](https://github.com/user-attachments/assets/957d7075-f1a8-40b2-a1db-b64fc0835283)

Mikään tuhannesta portista ei ollut auki. Huomaamme että kyseessä oli localhostissa ajettu komento kohdasta 0 network hops, eli kone ei ottanut muualle yhteyttä. 
  
####   d) Asenna kaksi vapaavalintaista demonia ja skannaa uudelleen. Analysoi ja selitä erot.

Päivitin paketit ajamalla `sudo apt update` ja `sudo apt upgrade`

Asensin Apachen ja CUPSin (Common Unix Printing System) ajamalla `sudo apt install apache2 cups`

Molemmat päälle komennoilla `sudo systemctl start apache2` ja `sudo systemctl start cups`

![image](https://github.com/user-attachments/assets/a47ed264-58d6-4bbc-ac61-ec2cd73ea9b4)

Ajoin taas nmapin: `sudo nmap -A locahost`

![image](https://github.com/user-attachments/assets/e09e3401-0670-4165-8801-8c593e7a3758)

Nyt näkyy että portit 80 ja 631 on päällä! Portti 80 on apachen käytössä webserverillä, ja 631 taas tulostinpalvelimen käytössä. Versiotkin noista näkyy, apachella 2.4.62 ja CUPSilla 2.4. Nmap osaa myös veikata että millä palvelimet pyörii, ja komennnon arvaava Linuxhan on oikein. 

####   e) Asenna Metasploitable 2 virtuaalikoneeseen

Tämän teenkin Vagrantilla. Host-koneella mulla olikin se jo:

![image](https://github.com/user-attachments/assets/c31ae6e9-aa6e-4cc2-870e-d3ff6b64a58a)

Loin kansion "metasploitabletest" kotihakemistooni. Sinne loin Vagrantfilen seuraavalla sisällöllä:

![image](https://github.com/user-attachments/assets/6810f0fd-fded-4eae-b528-01245fd3af84)

Kysyin vähän apua ChatGPT:ltä, koska palvelimen hallinnat kurssista on jo hetki aikaa enkä muistanut kunnolla miten luodaan noita Vagrantfilejä. 

Pastesin sinne tuon Teron vagrantfilen osoitteesta https://terokarvinen.com/2023/salt-vagrant/, ja kysyin että miten se muokataan tukemaan Kalia ja Metasploitablea. 

Sitten ajoin kansiosta komennon `vagrant up`.
Tuli pieni virhe, eka piti ajaa `vagrant init`. Ajoin sen ja korvasin juuri generoituun vagrantfileen aiemman sisällön. Nyt `vagrant up` uudestaan. 

####   f) Tee koneiden välille virtuaaliverkko. Jos säätelet VirtualBoxista


        
#### g) Etsi Metasploitable porttiskannaamalla (nmap -sn). Tarkista selaimella, että löysit oikean IP:n - Metasploitablen weppipalvelimen etusivulla lukee Metasploitable.


#### h) Porttiskannaa Metasploitable huolellisesti ja kaikki portit (nmap -A -p-). Poimi 2-3 hyökkääjälle kiinnostavinta porttia. Analysoi ja selitä tulokset näiden porttien osalta.



## Lähteet:

https://portal.cloud.hashicorp.com/vagrant/discover/cybersecurity/metasploitable2

https://terokarvinen.com/tunkeutumistestaus/

https://terokarvinen.com/2023/salt-vagrant/


